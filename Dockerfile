FROM rust:latest as dev
WORKDIR /rms

# Extra Metadata
LABEL version = "0.1.0"
LABEL description = "Test"

FROM dev as stage
COPY Cargo.toml /rms
COPY src /rms/src

FROM stage as build
RUN cargo build --release

# Export Stage
FROM scratch as export
COPY --from=build /rms/target/release/exploit .

FROM export
